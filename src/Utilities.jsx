import { useEffect, useState } from "react";

const Utilities = () => {
    const [bipEvent, setBipEvent] = useState(null);

    const handleDownload = () => {
        if (bipEvent) {
            bipEvent.prompt()
        } else {
            alert(`To install the app look for "Add to Homescreen" or install in your browser's menu.`)
        }
    }

    useEffect(() => {
        const handleSetInstallPrompt = (event) => setBipEvent(event)

        window.addEventListener("beforeinstallprompt", handleSetInstallPrompt)

        return () => {
            window.removeEventListener("beforeinstallprompt", handleSetInstallPrompt)
        }
    }, [])


    return (
        <section className="utility-container">
            <div className="control-rotate utilities">
                <svg
                    version="1.0"
                    xmlns="http://www.w3.org/2000/svg"
                    width="40px"
                    height="40px"
                    viewBox="0 0 300.000000 251.000000"
                    preserveAspectRatio="xMidYMid meet"
                >
                    <g transform="translate(0.000000,251.000000) scale(0.100000,-0.100000)" fill="#ffffff" stroke="none">
                        <path d="M1330 2264 c-303 -64 -565 -272 -708 -561 l-46 -93 -56 139 c-30 76 -61 146 -69 155 -22 26 -82 18 -100 -15 -13 -23 -8 -39 79 -257 80 -202 96 -234 120 -247 16 -8 35 -15 42 -15 7 0 115 41 239 90 188 76 228 95 238 116 9 20 8 32 -1 52 -22 45 -63 41 -230 -27 -82 -33 -148 -56 -148 -53 0 4 20 47 45 97 58 117 155 239 251 315 88 70 247 150 349 176 95 24 285 24 380 0 99 -25 240 -96 323 -162 134 -107 253 -290 301 -463 23 -85 37 -103 77 -103 28 0 64 32 64 57 0 35 -55 196 -94 273 -134 266 -356 447 -635 518 -76 20 -118 24 -225 23 -72 0 -160 -7 -196 -15z" />
                        <path d="M2164 989 c-183 -74 -223 -94 -233 -115 -9 -20 -8 -32 1 -52 21 -44 57 -40 224 26 82 33 151 58 153 56 9 -8 -86 -182 -139 -252 -122 -162 -310 -288 -505 -338 -95 -24 -284 -24 -380 0 -99 25 -240 96 -323 162 -134 107 -253 290 -301 463 -23 85 -37 104 -77 104 -28 0 -64 -33 -64 -58 0 -35 55 -196 94 -273 129 -255 342 -436 608 -513 105 -30 324 -38 439 -14 303 61 565 264 712 552 l52 102 55 -138 c30 -76 61 -146 69 -155 16 -19 72 -21 89 -4 25 25 10 84 -74 293 -74 185 -90 218 -115 230 -15 8 -36 15 -46 14 -10 0 -118 -41 -239 -90z" />
                    </g>
                </svg>
                <p>Rotate</p>
            </div>
            <div className="control-reset utilities">
                <svg
                    version="1.0"
                    xmlns="http://www.w3.org/2000/svg"
                    width="40px"
                    height="40px"
                    viewBox="0 0 300.000000 262.000000"
                    preserveAspectRatio="xMidYMid meet"
                >
                    <g transform="translate(0.000000,262.000000) scale(0.100000,-0.100000)" fill="#ffffff" stroke="none">
                        <path d="M1365 2534 c-212 -33 -392 -100 -550 -207 -83 -57 -218 -188 -284 -277 -109 -147 -197 -355 -222 -528 -19 -136 -7 -376 26 -492 55 -200 147 -365 283 -511 413 -440 1057 -513 1562 -176 105 70 272 243 338 350 108 174 173 371 176 532 1 80 -2 94 -22 123 -31 43 -77 65 -133 66 -94 0 -150 -67 -164 -193 -3 -35 -18 -101 -32 -145 -72 -232 -230 -417 -448 -526 -144 -73 -229 -92 -395 -92 -166 0 -251 19 -395 92 -219 110 -372 289 -451 530 -26 79 -28 97 -28 250 -1 191 10 242 79 385 134 279 386 457 698 497 172 22 384 -22 535 -110 l64 -37 -74 -5 c-92 -7 -135 -30 -166 -90 -40 -78 -19 -155 58 -207 32 -23 39 -23 319 -23 320 0 332 2 379 71 23 33 23 35 20 334 -3 339 -2 335 -84 375 -51 25 -94 25 -143 0 -52 -26 -82 -76 -88 -150 -3 -33 -8 -60 -10 -60 -2 0 -23 13 -46 29 -103 70 -270 141 -407 172 -83 19 -327 33 -395 23z" />
                    </g>
                </svg>
                <p>Reset</p>
            </div>
            <div className="control-swap utilities">
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="40px" height="40px" viewBox="0 0 300.000000 249.000000" preserveAspectRatio="xMidYMid meet">
                    <g transform="translate(0.000000,249.000000) scale(0.100000,-0.100000)" fill="#ffffff" stroke="none">
                        <path d="M1115 2156 c-22 -7 -54 -20 -71 -29 -36 -18 -106 -92 -128 -135 l-15 -29 -163 -5 c-149 -4 -168 -7 -219 -30 -76 -35 -133 -88 -166 -156 l-28 -57 0 -615 c0 -607 0 -616 21 -661 32 -69 91 -128 159 -161 l60 -28 935 0 935 0 60 28 c68 33 127 92 159 161 21 45 21 54 21 661 l0 615 -28 57 c-33 68 -90 121 -166 156 -51 23 -70 26 -218 30 l-163 5 -24 41 c-34 58 -93 111 -151 138 -49 23 -58 23 -410 25 -271 2 -370 -1 -400 -11z m738 -219 c15 -9 42 -48 61 -85 55 -110 46 -106 280 -112 207 -5 235 -10 256 -50 6 -12 10 -221 10 -595 l0 -577 -29 -29 -29 -29 -902 0 -902 0 -29 29 -29 29 0 577 c0 374 4 583 10 595 21 40 49 45 256 50 234 6 225 2 279 111 37 72 50 86 92 99 15 5 168 8 338 7 279 -2 314 -4 338 -20z" />
                        <path d="M1823 1645 c-17 -7 -39 -28 -48 -45 -12 -24 -21 -30 -33 -24 -89 39 -153 53 -237 54 -160 0 -269 -44 -381 -155 -80 -79 -134 -178 -142 -257 -4 -44 -2 -50 31 -83 69 -69 145 -37 187 76 42 116 149 196 276 207 89 7 98 2 78 -42 -21 -42 -13 -79 26 -117 l28 -29 142 0 c214 0 220 6 220 218 0 154 -6 173 -66 198 -40 17 -41 17 -81 -1z" />
                        <path d="M1852 1075 c-17 -14 -38 -49 -51 -83 -43 -119 -148 -199 -275 -209 -91 -8 -100 -3 -80 41 21 42 13 79 -26 117 l-28 29 -147 0 -147 0 -34 -34 -34 -34 0 -145 c0 -163 8 -185 75 -207 30 -10 41 -9 73 7 20 10 43 30 50 45 l12 26 58 -23 c158 -64 349 -46 494 47 110 70 216 224 226 328 4 46 2 52 -31 85 -44 44 -91 47 -135 10z" />
                    </g>
                </svg>
                <p>Swap camera</p>
            </div>
            <div className="control-download utilities" onClick={handleDownload}>
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="40px" height="40px" viewBox="0 0 300.000000 259.000000" preserveAspectRatio="xMidYMid meet">
                    <g transform="translate(0.000000,259.000000) scale(0.100000,-0.100000)" fill="#ffffff" stroke="none">
                        <path d="M1457 2352 c-16 -17 -17 -88 -17 -818 l0 -799 -273 273 c-291 290 -301 298 -347 252 -47 -47 -41 -55 277 -371 249 -247 305 -297 339 -307 119 -34 136 -23 475 319 304 307 311 317 269 359 -46 46 -56 38 -347 -252 l-273 -273 0 801 c0 763 -1 802 -18 817 -24 22 -65 21 -85 -1z" />
                        <path d="M619 729 c-19 -19 -20 -30 -17 -193 3 -169 4 -173 31 -214 15 -23 45 -51 67 -62 38 -20 56 -20 803 -20 l763 0 46 29 c76 48 88 86 88 279 0 149 -2 164 -20 182 -27 27 -62 25 -88 -3 -21 -22 -22 -33 -22 -174 l0 -152 -26 -20 c-26 -21 -34 -21 -741 -21 -716 0 -743 1 -765 34 -4 6 -8 77 -8 157 0 133 -2 149 -21 173 -25 32 -61 34 -90 5z" />
                    </g>
                </svg>
                <p>Download app</p>
            </div>
        </section>
    )
}

export default Utilities